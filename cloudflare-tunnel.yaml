# Cloudflare Tunnel Configuration for PJUD Scraper
# Expone 2 servicios principales con bases de datos separadas

tunnel: pjud-scraper
credentials-file: /Users/diegomartinez/.cloudflared/credentials.json

ingress:
  # Servicio 1: API REST + Frontend Documentación (puerto 3000)
  # BD: pjud_api (separada, poblada por la API)
  - hostname: api.tudominio.com  # Cambiar por tu dominio real
    service: http://localhost:3000
    originRequest:
      noTLSVerify: false
      connectTimeout: 30s
      # Headers para CORS
      httpHostHeader: api.tudominio.com

  # Servicio 2: Symfony App (puerto 8000)
  # BD: codi_ejamtest (BD principal de Symfony)
  - hostname: app.tudominio.com  # Cambiar por tu dominio real
    service: http://localhost:8000
    originRequest:
      noTLSVerify: false
      connectTimeout: 30s
      httpHostHeader: app.tudominio.com

  # Catch-all: Error 404
  - service: http_status:404

# Opciones de logging
loglevel: info

# Opciones de transporte
transport-loglevel: warn

# Métricas (opcional - para monitoreo)
metrics: localhost:2000
