tengo:

  var sql_query='Call fsp_Pagos_Recibidos_Sel(?)';
  +-------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure               | sql_mode              | Create Procedure                                                                                                                                                                                            
                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                            | character_set_client | collation_connection | Database Collation |
+-------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| fsp_Pagos_Recibidos_Sel | NO_AUTO_VALUE_ON_ZERO | CREATE DEFINER=`root`@`localhost` PROCEDURE `fsp_Pagos_Recibidos_Sel`(IN `fecha` DATE)
BEGIN
select
pago.contrato_id,
pago.id as pago_id,
-999 as cuota_id,
-999  as pago_cuotas_id,
contrato.nombre,
contrato.email,
pago.fecha_pago,
pago.hora_pago,
pago.fecha_registro,
pago.fecha_ingreso,
pago.monto,
pago.comprobante ,
f_html_cliente(1,contrato.nombre,pago.monto,pago.fecha_pago,pago.hora_pago,pago.fecha_registro) as template
from pago,contrato
where  pago.contrato_id=contrato.id
and cast(pago.fecha_registro as date)<=cast(fecha as date)
and pago.anulado IS NULL
and pago.id not in 
(select pago_id from mails_enviados where estado=1)
and cast(pago.fecha_registro as date)>'2024-08-15'
order by pago.id;
END | utf8mb4              | utf8mb4_general_ci   | latin1_swedish_ci  |
+-------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.000 sec)

  var sql_query='Call fsp_Cuotas_a_Vencer_Sel(?,?)';
  var sql_query='Call fsp_Estado_de_Cuenta_Sel(?,?)';
  +--------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure                | sql_mode              | Create Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | character_set_client | collation_connection | Database Collation |
+--------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| fsp_Estado_de_Cuenta_Sel | NO_AUTO_VALUE_ON_ZERO | CREATE DEFINER=`root`@`localhost` PROCEDURE `fsp_Estado_de_Cuenta_Sel`(IN `contrato_id` INT, IN `fecha` DATE)
BEGIN
select 
contrato.id as contrato_id,
cuota.id as cuota_id,
contrato.nombre,
contrato.email,
cuota.numero,
cuota.fecha_pago as Vence,
cuota.monto,
case 
when ISNULL(cuota.pagado)=1 then 0 
else cuota.pagado
end 
as pagado,
f_html_cliente(2,contrato.nombre,-999,cuota.fecha_pago) as template
from cuota,contrato
where cuota.contrato_id=contrato.id
and contrato.id=contrato_id
and contrato.id not in
(select contrato_id from mails_enviados where mails_enviados.contrato_id=contrato_id and cast(fecha_enviado as date)=fecha and tipo_envio_id=2)
order by cuota.numero;
END | utf8mb4              | utf8mb4_general_ci   | latin1_swedish_ci  |
+--------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.017 sec)
  var sql_query='Call fsp_Mails_Enviados_Ins_Upd(?,?,?,?,?,?,?)';
  +----------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure                  | sql_mode              | Create Procedure                                                                                                                                                                                         
                                                                                                                                                                                                                                                 | character_set_client | collation_connection | Database Collation |
+----------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| fsp_Mails_Enviados_Ins_Upd | NO_AUTO_VALUE_ON_ZERO | CREATE DEFINER=`root`@`localhost` PROCEDURE `fsp_Mails_Enviados_Ins_Upd`(IN `tipo_envio_id` INT, IN `fecha_enviado` DATETIME, IN `contrato_id` INT, IN `pago_cuota_id` INT, IN `pago_id` INT, IN `cuota_id` INT, IN `estado` INT)
BEGIN

insert INTo mails_enviados(tipo_envio_id, fecha_enviado, contrato_id, pago_cuota_id, pago_id, cuota_id, estado)
values(tipo_envio_id, fecha_enviado, contrato_id, pago_cuota_id, pago_id, cuota_id, estado);
END | utf8mb4              | utf8mb4_general_ci   | latin1_swedish_ci  |
+----------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
  var sql_query='Call fsp_Contratos_Sel()';
  +-------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure         | sql_mode              | Create Procedure                                                                                                                                          | character_set_client | collation_connection | Database Collation |
+-------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| fsp_Contratos_Sel | NO_AUTO_VALUE_ON_ZERO | CREATE DEFINER=`root`@`localhost` PROCEDURE `fsp_Contratos_Sel`()
BEGIN
select
min(id) as contrato_id_Min,
max(id) as contrato_id_Max
from contrato;
END | utf8mb4              | utf8mb4_general_ci   | latin1_swedish_ci  |
+-------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.000 sec)
  var sql_query='Call fsp_Last_Envios_Sel()';
  +---------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure           | sql_mode              | Create Procedure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | character_set_client | collation_connection | Database Collation |
+---------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| fsp_Last_Envios_Sel | NO_AUTO_VALUE_ON_ZERO | CREATE DEFINER=`root`@`localhost` PROCEDURE `fsp_Last_Envios_Sel`(
)
BEGIN
DECLARE v_envio_1 int;
DECLARE v_envio_2 int;
DECLARE v_envio_3 int;
SET v_envio_1 = (select max(id) from mails_enviados where tipo_envio_id=1);
SET v_envio_2 = (select max(id) from mails_enviados where tipo_envio_id=2);
SET v_envio_3 = (select max(id) from mails_enviados where tipo_envio_id=3);
select

        IFNULL(v_envio_1,0) AS anvio1,
    IFNULL(v_envio_2,0) AS anvio2,
    IFNULL(v_envio_3,0) AS anvio3;
END | utf8mb4              | utf8mb4_general_ci   | latin1_swedish_ci  |
+---------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.003 sec)
  var sql_query='Call fsp_Testigo_Enviados(?,?)';


cual de estos es el que env√¨a un correo o necesitas mas info?

+---------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+

Rodrigo, ninguno de los procedimientos que mostraste env√≠a correos.

Todos solo consultan o insertan datos, principalmente en la tabla mails_enviados.
El env√≠o real de correos NO ocurre dentro de MySQL: lo hace tu backend Node.js, PHP, Python, o el sistema externo donde llamas estos SP.

üìå ¬øQu√© hace cada SP de tu lista?

Aqu√≠ te dejo un resumen clarito:

1Ô∏è‚É£ fsp_Pagos_Recibidos_Sel(fecha)

‚úî Selecciona pagos que cumplen condiciones
‚ùå No env√≠a correos

2Ô∏è‚É£ fsp_Estado_de_Cuenta_Sel(contrato_id, fecha)

‚úî Selecciona cuotas y genera HTML
‚ùå No env√≠a correos

3Ô∏è‚É£ fsp_Cuotas_a_Vencer_Sel(?,?)

(El c√≥digo no est√° aqu√≠, pero generalmente selecciona cuotas pr√≥ximas)
‚ùå No env√≠a correos

4Ô∏è‚É£ fsp_Mails_Enviados_Ins_Upd(...)

‚úî Inserta un registro indicando que un mail fue enviado
‚ùå NO env√≠a el correo, solo registra que ya lo hiciste

5Ô∏è‚É£ fsp_Contratos_Sel()

‚úî Devuelve min/max id
‚ùå No env√≠a nada

6Ô∏è‚É£ fsp_Last_Envios_Sel()

‚úî Devuelve el √∫ltimo id por tipo de env√≠o
‚ùå No env√≠a correos

7Ô∏è‚É£ fsp_Testigo_Enviados(?,?)

No tenemos el c√≥digo
‚ö† Podr√≠a ser importante revisarlo

üß© Entonces‚Ä¶ ¬øQUI√âN ENV√çA EL CORREO DE VERDAD?

El flujo normal t√≠pico es:

Tu backend llama a un SP como fsp_Pagos_Recibidos_Sel o fsp_Estado_de_Cuenta_Sel.

El backend genera un HTML usando template.

El backend env√≠a el correo (SMTP, NodeMailer, PHPMailer, etc).

El backend llama a fsp_Mails_Enviados_Ins_Upd para registrar que se envi√≥.

üëâ El procedimiento que registra el env√≠o es fsp_Mails_Enviados_Ins_Upd, pero NO manda el correo.
üëâ El env√≠o de correo est√° en tu c√≥digo externos (Node.js, PHP, etc.)

‚ùì ¬øQuieres que identifique exactamente d√≥nde se env√≠a el correo?

Solo necesito que me muestres el archivo del backend donde llamas a:

Call fsp_Pagos_Recibidos_Sel(?)

O donde aparece smtp, nodemailer, PHPMailer, sendMail, etc.

Con eso te identifico el lugar exacto donde se env√≠a el correo.